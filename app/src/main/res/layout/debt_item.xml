<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <data>
        <import type="com.tadiuzzz.debts.utils.BindingUtils" />
        <import type="android.view.View" />
        <variable
            name="debtPOJO"
            type="com.tadiuzzz.debts.domain.entity.DebtPOJO" />
        <variable
            name="listener"
            type="com.tadiuzzz.debts.ui.adapter.OnDebtPOJOClickListener" />

    </data>

    <LinearLayout
        android:id="@+id/llDebtItemContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="@{() -> listener.onDebtPOJOClick(debtPOJO)}"
        android:background="@{debtPOJO.debt.isReturned ? @color/debtReturnedItemBackground : debtPOJO.debt.dateOfExpiration &lt; BindingUtils.getDateNow() ? @color/debtDateExpiredItemBackground : @color/debtItemBackground }"
        android:orientation="vertical">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="16dp"
            android:paddingTop="8dp"
            android:paddingRight="16dp"
            android:paddingBottom="8dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/tvDebtItemPersonName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@{debtPOJO.debtPerson.name}"
                    tools:text="Александр Петров"/>

                <TextView
                    android:id="@+id/tvDebtItemCategoryName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@{debtPOJO.debtCategory.name}"
                    tools:text="Деньги"/>

                <TextView
                    android:id="@+id/tvDebtItemAmount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@{String.valueOf(debtPOJO.debt.amount)}"
                    tools:text="1500"/>

            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical">

                <LinearLayout
                    android:id="@+id/llDebtItemDateOfStartContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <TextView
                        android:id="@+id/tvLabelForDebtItemDateOfStart"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:textAlignment="textEnd"
                        android:layout_marginEnd="8dp"
                        android:text="с" />

                    <TextView
                        android:id="@+id/tvDebtItemDateOfStart"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:visibility="@{debtPOJO.debt.dateOfStart != 0 ? View.VISIBLE : View.INVISIBLE}"
                        android:text="@{BindingUtils.getFormattedDateFromMillis(debtPOJO.debt.dateOfStart)}"
                        tools:text="23.05.2019"/>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/llDebtItemDateOfExpirationContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <TextView
                        android:id="@+id/tvLabelForDebtItemDateOfExpiration"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginEnd="8dp"
                        android:textAlignment="textEnd"
                        android:text="до" />

                    <TextView
                        android:id="@+id/tvDebtItemDateOfExpiration"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:visibility="@{debtPOJO.debt.dateOfExpiration != 0 ? View.VISIBLE : View.INVISIBLE}"
                        android:text="@{BindingUtils.getFormattedDateFromMillis(debtPOJO.debt.dateOfExpiration)}"
                        tools:text="24.05.2019" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/llDebtItemDateOfEndContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="@{debtPOJO.debt.isReturned ? View.VISIBLE : View.INVISIBLE}"
                    android:orientation="horizontal">

                    <TextView
                        android:id="@+id/tvLabelForDebtItemDateOfEnd"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginEnd="8dp"
                        android:textAlignment="textEnd"
                        android:text="возвращено" />

                    <TextView
                        android:id="@+id/tvDebtItemDateOfEnd"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@{BindingUtils.getFormattedDateFromMillis(debtPOJO.debt.dateOfEnd)}"
                        tools:text="30.05.2019" />
                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

        <TextView
            android:id="@+id/tvDebtItemDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="16dp"
            android:paddingRight="16dp"
            android:paddingBottom="8dp"
            android:text="@{debtPOJO.debt.description}"
            tools:text="Заплатил за меня в ресторане 23 мая 2019 года, нужно отдать поскорее" />

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="@android:color/darker_gray" />

    </LinearLayout>
</layout>